#!/bin/bash
# Select the correct binary for Linux, macOS or Windows msys
set -e

DEBUG=0
SCRIPTPATH=$(cd "$(dirname "$0")" > /dev/null; pwd -P)

debug() {
    if [ ${DEBUG} -eq 1 ]; then
        echo $*
    fi
}

fatal_error() {
    echo $*
    exit 1
}

if [ "${OSTYPE}" = "linux-gnu" ]; then
    clang_format_exe=clang-format-linux64
elif [ "${OSTYPE}" = "msys" ]; then
    clang_format_exe=clang-format.exe
else
    fatal_error Unknown OS type "${OSTYPE}"
    exit 1
fi

debug "Using clang-format binary '${clang_format_exe}'"
"${SCRIPTPATH}/${clang_format_exe}" $*
